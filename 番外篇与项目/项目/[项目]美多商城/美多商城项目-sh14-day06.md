### 美多商城项目

##### 1. 商品部分-自定义文件存储系统

1）自定义文件存储类。

2）修改`DEFAULT_FILE_STORAGE`配置项。

##### 2. 富文本编辑器

CKEditor

富文本: 带有格式的文本。

##### 3. 网站优化-页面静态化

1）概念

​	提前将页面所用到的数据从数据库查询出来，然后生成一个静态页面，之后用户来访问的时候，直接返回静态页面。

​	首页静态化: 获取首页用到的数据表中的数据，生成静态首页index.html.

​	1分钟有1000个用户访问了网站首页，直接返回静态index.html。

2）页面静态化步骤

​	a）模板：使用一个模板将页面用到的数据展示的代码写好。

​	b）在进行页面静态化的时候，从数据库中查出页面所需的数据，然后直接使用模板进行模板渲染，获取渲染之后的静态内容。

​	c）将静态内容保存成静态文件。

3）静态页面的数据和数据表中数据同步(静态页面的更新)

​	a）定时任务：将生成静态文件的方法添加到操作系统的定时任务中，然后由操作系统每隔一段时间调用一次对应的代码。对于一些更新速度比较快的页面，采用定时任务。

​	b）每当管理员通过Admin界面修改页面对应数据表中的数据时，重新执行生成静态页面的方法，让静态页面和数据库中数据保持同步。对于其他一些更新速度不是很快的页面，采用第二种方法。

##### 4. 首页静态化

​	将首页采用页面静态化技术生成静态页面，用户来访问时直接返回静态页面。

​	首页数据更新比较频繁，所以首页静态页面和数据表数据同步时，可以采用定时任务。

##### 5. 商品详情页面静态化

​	将数据表中的每个商品生成一个对应的静态详情页面，当用户访问某个商品时，直接返回对应商品的静态详情页面。

​	使用celery定义任务函数。

##### 6. 补充:

1）使用模板详细步骤:

```python
from django.template import loader

# 1. 加载模板(指定所要使用的模板)
temp = loader.get_template('模板文件路径')

# 2. 模板渲染(将模板文件中的变量进行替换，返回替换后的html内容)
res_html = temp.render(context='传递给模板文件的数据字典')
```

2）Admin管理界面修改数据表的数据

​	当管理员通过Admin管理界面修改了某个数据表中的数据时，模型类对应的后台Admin管理类中的`save_model(新增或更新)`和`delete_model(删除)`会被调用。